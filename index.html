<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="baidu-site-verification" content="L6Lm9d5Crl"/>
  
  
  
  
  <title>Liang`s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Liang`s Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Liang`s Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Liang`s Blog">
  
    <link rel="alternative" href="/atom.xml" title="Liang`s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/avatar.png" class="js-avatar">
            
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Petter</a></h1>
        </hgroup>
        
        
            <form>
                <input type="text" class="st-default-search-input search" id="local-search-input" placeholder=" Search...">
            </form>
            <div id="local-search-result"></div>
        
        
            <script type="text/javascript">
                (function() {
                    'use strict';
                    function getMatchData(keyword, data) {
                        var matchData = [];
                        for(var i =0;i<data.length;i++){
                            if(data[i].title.toLowerCase().indexOf(keyword)>=0) 
                                matchData.push(data[i])
                        }
                        return matchData;
                    }
                    var $input = $('#local-search-input');
                    var $resultContent = $('#local-search-result');
                    $input.keyup(function(){
                        $.ajax({
                            url: '/search.json',
                            dataType: "json",
                            success: function( json ) {
                                var str='<ul class=\"search-result-list\">';                
                                var keyword = $input.val().trim().toLowerCase();
                                $resultContent.innerHTML = "";
                                if ($input.val().trim().length <= 0) {
                                    $resultContent.empty();
                                    $('#switch-area').show();
                                    return;
                                }
                                var results = getMatchData(keyword, json);
                                if(results.length === 0){
                                    $resultContent.empty();
                                    $('#switch-area').show();
                                    return;
                                } 
                                for(var i =0; i<results.length; i++){
                                    str += "<li><a href='"+ results[i].url +"' class='search-result-title'>"+ results[i].title +"</a></li>";
                                }
                                str += "</ul>";
                                $resultContent.empty();
                                $resultContent.append(str);
                                $('#switch-area').hide();
                            }
                        });
                    });
                })();
            </script>
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        
        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a  href="/archives/">所有文章</a></li>
                        
                            <li><a  href="/categories/开发工具/">玩转开发工具</a></li>
                        
                            <li><a  href="/categories/digital">玩转数码</a></li>
                        
                            <li><a  href="/categories/cognition">认知提升</a></li>
                        
                            <li><a  href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl github"  target="_blank" href="https://github.com/pjlw/pjlw.github.io" title="github">github</a>
                            
                                <a class="fl weibo"  target="_blank" href="http://weibo.com/5727331539/profile?rightmod=1&wvr=6&mod=personinfo&is_all=1" title="weibo">weibo</a>
                            
                                <a class="fl rss"  target="_blank" href="/atom.xml" title="rss">rss</a>
                            
                        </ul>
                    </nav>
                </section>
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/Mybatis/" style="font-size: 13.33px;">Mybatis</a> <a href="/tags/Spring/" style="font-size: 16.67px;">Spring</a> <a href="/tags/再别康桥/" style="font-size: 10px;">再别康桥</a> <a href="/tags/汇编/" style="font-size: 20px;">汇编</a> <a href="/tags/诗句/" style="font-size: 13.33px;">诗句</a>
                    </div>
                </section>
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.itellyou.cn/">MSDN</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.imooc.com/">慕课网</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="https://www.zhihu.com/explore">知呼</a>
                    
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">JUST DO IT</div>
                </section>
                
            </div>
        </div>
    </header>
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Petter</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/avatar.png" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Petter</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/categories/开发工具/">玩转开发工具</a></li>
                
                    <li><a href="/categories/digital">玩转数码</a></li>
                
                    <li><a href="/categories/cognition">认知提升</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="github" target="_blank" href="https://github.com/pjlw/pjlw.github.io" title="github">github</a>
                    
                        <a class="weibo" target="_blank" href="http://weibo.com/5727331539/profile?rightmod=1&wvr=6&mod=personinfo&is_all=1" title="weibo">weibo</a>
                    
                        <a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-Mybatis2" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a  href="/2017/10/24/Mybatis2/" class="article-date">
      <time datetime="2017-10-24T13:50:11.000Z" itemprop="datePublished">2017-10-24</time>
</a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a  class="article-title" href="/2017/10/24/Mybatis2/">Mybatis2</a>
    </h1>
  


      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Mybatis开发dao的方法"><a href="#Mybatis开发dao的方法" class="headerlink" title="Mybatis开发dao的方法"></a>Mybatis开发dao的方法</h2><h3 id="SqlSession的使用范围"><a href="#SqlSession的使用范围" class="headerlink" title="SqlSession的使用范围"></a>SqlSession的使用范围</h3><ul>
<li>通过SqlSessionFactoryBuilder()创建SqlSessionFactory</li>
<li>通过SqlSessionFactory创建SqlSession</li>
<li>使用单例模式管理SqlSession(一旦创建就一直使用一个实例)</li>
<li>是线程不安全的，除了有接口中的方法(操作数据库的方法)，还有数据域属性</li>
<li>SqlSession的最佳的使用场合在方法体中，定义为局部变量使用</li>
</ul>
<hr>
<h3 id="使用原始dao开发方法-需要写dao接口和dao的实现类"><a href="#使用原始dao开发方法-需要写dao接口和dao的实现类" class="headerlink" title="使用原始dao开发方法(需要写dao接口和dao的实现类)"></a>使用原始dao开发方法(需要写dao接口和dao的实现类)</h3><ul>
<li>实现</li>
</ul>
<ol>
<li>写dao接口和dao实现类</li>
<li>向dao实现类中注入SqlSessionFactory,在方法体内通过SqlSessionFactory创建SqlSession<h4 id="dao接口"><a href="#dao接口" class="headerlink" title="dao接口"></a>dao接口</h4><pre><code>//通过id查询用户信息
public void findUserById(int id) throws Exception;
//通过User对象插入用户信息
public void insertUser(User user) throws Exception;
//通过id删除用户信息
public void deleteUser(int id) throws Exception;
</code></pre></li>
</ol>
<h4 id="dao实现类"><a href="#dao实现类" class="headerlink" title="dao实现类"></a>dao实现类</h4><ul>
<li>存在的不足<br>　1. 在dao方法中存在大量的模板方法，<br>　2. 在调用sqlSession时将statement的id硬编码<br>　3. 在SqlSession方法传入变量时，传入的参数的类型是泛型，即使参数传入出错，程序在编译时也不会报错</li>
</ul>
<hr>
<h3 id="使用mapper代理方式-需要写mapper接口-还是需要SqlSession手动提交-commit"><a href="#使用mapper代理方式-需要写mapper接口-还是需要SqlSession手动提交-commit" class="headerlink" title="使用mapper代理方式(需要写mapper接口),还是需要SqlSession手动提交(commit())"></a>使用mapper代理方式(需要写mapper接口),还是需要SqlSession手动提交(commit())</h3><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><ul>
<li>编写mapper.xml映射文件</li>
<li>编写mapper接口(相当于dao接口)，需要遵循开发规范</li>
</ul>
<ol>
<li>在mapper.xml中namespace等于mapper接口地址</li>
<li>mapper.java中的方法名与mapper.xml中的statement的id一致</li>
<li>mapper接口中方法的输入参数类型与mapper.xml中statement中的parameterType的类型一致</li>
<li>mapper.java中方法的返回值的类型和mapper.xml中statement中的resultType一致</li>
</ol>
<ul>
<li>Mybatis可以自动生成mapper接口实现类代理对象</li>
</ul>
<ol>
<li>sqlSession.getMapper(userMapper.class);获取对应userMapper.java接口的对象</li>
<li>sqlSession.selectOne：会自动查询</li>
<li>sqlSession.selectList:输入的parameterType是对应的类，但是接受的是List与其他方式不同</li>
</ol>
<hr>
<h4 id="mapper接口方法参数只有一个不会影响系统开发"><a href="#mapper接口方法参数只有一个不会影响系统开发" class="headerlink" title="mapper接口方法参数只有一个不会影响系统开发"></a>mapper接口方法参数只有一个不会影响系统开发</h4><ul>
<li>可以使用包装类的pojo满足不同法的业务方法的需求</li>
<li>持久层方法的参数可以是包装类型,map….但是service方法中不建议使用包装类型(不利于业务层的扩展)</li>
</ul>
<hr>
<h3 id="SqlMapConfig-xml-Mybatis的全局配置文件"><a href="#SqlMapConfig-xml-Mybatis的全局配置文件" class="headerlink" title="SqlMapConfig.xml:Mybatis的全局配置文件"></a>SqlMapConfig.xml:Mybatis的全局配置文件</h3><ul>
<li>properties(属性)</li>
</ul>
<ol>
<li>将数据库的连接参数单独配置在db.properties中，只需要在sqlMapConfig.xml中加载db.properties中，就不需要对数据库的链接参数硬编码</li>
<li>方便参数进行统一的管理，其他xml文件也可以引用db.properties中的属性值</li>
</ol>
<ul>
<li>代码实现<br>1.　新建db.properties将之前在SqlMapConfig的数据库配置信息加载到properties文件中，通过<pre><code>&lt;properties resource=&quot;db.properties&quot;&gt;&lt;/properties&gt;
</code></pre></li>
</ul>
<ol>
<li>通过EL表达式获取对应名字的值<pre><code>&lt;dataSource&gt;
    &lt;dataSource type=&quot;POOLED&quot;&gt;
    &lt;property name=&quot;driver&quot; value=&quot;${jdbc.driver}&quot;/&gt;
    &lt;property name=&quot;url&quot; value=&quot;${jdbc.url}&quot;/&gt;
    &lt;property name=&quot;username&quot; value=&quot;${jdbc.username}&quot;/&gt;
    &lt;property name=&quot;password&quot; value=&quot;${jdbc.passworld}&quot;/&gt;
&lt;/dataSource&gt;
</code></pre>　3. 不要在properties中添加任何的属性值，只将属性值定义在peoperties文件中<br>　4. properties属性文件中属性名的定义需要一定的特殊性，如:xxxxx.xxxxx</li>
</ol>
<hr>
<ul>
<li>settings(全局配置参数)</li>
</ul>
<ol>
<li>会影响Mybatis的运行环境</li>
</ol>
<h2 id=""><a href="#" class="headerlink" title=" - "></a> - </h2><ul>
<li>typeAliases(类型别名)重点</li>
</ul>
<ol>
<li>针对parameterType或ResultType所指定的类型来定义别名</li>
<li>pojo的类型需要自定义别名  <pre><code>&lt;!--单个别名的定义--&gt;
&lt;typeAliases&gt;
    &lt;typeAlias type=&quot;指定的类型&quot; alias=&quot;&quot; &gt;&lt;/typeAliases&gt;
&lt;/typeAliases&gt;
&lt;!--批量别名的定义--&gt;(常用)
&lt;package name =  &quot;指定包名&quot;&gt;&lt;/package&gt;//定义的别名就是类名
</code></pre></li>
</ol>
<hr>
<ul>
<li>typeHandlers(类型处理器)</li>
</ul>
<ol>
<li>完成jdbc类型和java类型的转换</li>
<li>一般不需要再次定义</li>
</ol>
<hr>
<ul>
<li>ObjectFactory(对象工厂)</li>
<li>plugins(插件)</li>
<li>enviroments(环境集合属性对象)<blockquote>
<ul>
<li>enviroment(环境子属性对象)</li>
<li>transactionManager(事务管理)</li>
<li>datasource(数据源)</li>
</ul>
</blockquote>
</li>
</ul>
<hr>
<ul>
<li>mappers(映射器)</li>
</ul>
<ol>
<li>通过resource加载单个映射文件<pre><code>&lt;mapper resource=&quot;sqlmap/user.xml&quot;&gt;&lt;/mapper&gt;
</code></pre>　２．通过mapper接口实现<pre><code>&lt;mapper class=&quot;&quot;&gt;&lt;/mapper&gt;
&lt;!--需要将mapper接口类名和mapper.xml映射文件名保持一致，且在一个目录--&gt;
&lt;!--前提必须使用mapper的代理方式--&gt;
</code></pre>　3. 批量加载(推荐使用)<br>　           <!--需要指定mapper接口的包名--><pre><code>&lt;!--需要将mapper接口类名和mapper.xml映射文件名保持一致，且在一个目录--&gt;
</code></pre>　           <package name=""></package></li>
</ol>
<h3 id="输入映射"><a href="#输入映射" class="headerlink" title="输入映射"></a>输入映射</h3><h4 id="传递pojo的包装对象"><a href="#传递pojo的包装对象" class="headerlink" title="传递pojo的包装对象"></a>传递pojo的包装对象</h4><ul>
<li>通过parameterType来指定输入参数的类型，可以是简单类型，自定义包装类型，hashMap</li>
<li>操作步骤</li>
</ul>
<ol>
<li><p>通过一个类继承user类</p>
<pre><code>package cn.pjl.mybatis.mapper;
import cn.pjl.mybatis.first.bena.User;
public class Usercustom extends User
{
    //可以同时包含其他的属性
}
</code></pre></li>
<li><p>通过一个新的类创建继承类的对象，完成对应的set和get方法，便于包装多种不同的条件</p>
<pre><code>package cn.pjl.mybatis.mapper;

public class UserQueryVo
{
    private Usercustom usercustom;

    public Usercustom getUsercustom() {
        return usercustom;
    }

    public void setUsercustom(Usercustom usercustom) {
        this.usercustom = usercustom;
    }
}
</code></pre><ol>
<li>在mapper.xml文件中配置对应的实现<pre><code>&lt;select id=&quot;findUserList&quot; parameterType=&quot;cn.pjl.mybatis.mapper.UserQueryVo&quot; resultType=&quot;cn.pjl.mybatis.mapper.Usercustom&quot;&gt;
    select * from user where user.sex=#{usercustom.sex} and user.USERNAME like &apos;%${usercustom.username}%&apos;
&lt;/select&gt;
</code></pre>　5. 通过接口写出对应的接口函数，再用其他类完还层功能的需求</li>
</ol>
</li>
</ol>
<hr>
<h3 id="输出映射"><a href="#输出映射" class="headerlink" title="输出映射"></a>输出映射</h3><h4 id="ResultType"><a href="#ResultType" class="headerlink" title="ResultType"></a>ResultType</h4><ul>
<li>输出的问题</li>
</ul>
<ol>
<li>在输入将*替代为sql字段时，没有查询的值不会映射成功</li>
<li>在查询sql时，如果为sql字段取别名也不会映射成功</li>
<li>只有查询的列名和pojo的属性名完全一样才能查询成功<br>-　输出简单类型<blockquote>
<ul>
<li>查询出来的结果只有一行且一列，可以使用简单类型来进行输出的映射</li>
</ul>
</blockquote>
</li>
</ol>
<ul>
<li>输出pojo和pojo的列表<blockquote>
<ul>
<li>不管输入的是pojo单个对象还是一个列表在mapper.xml中resultType指定的类型是一样的</li>
<li>在mapper.java指定的方法返回类型不一样</li>
<li>输出单个pojo,方法返回单个对象类型</li>
<li>输出pojo对象list，方法的返回值是list<pojo></pojo></li>
</ul>
</blockquote>
</li>
</ul>
<hr>
<h4 id="ResultMap"><a href="#ResultMap" class="headerlink" title="ResultMap"></a>ResultMap</h4><ul>
<li>使用方法:如果查询出来的列名和pojo的属性名不一样，可以通过定义一个ResultMap对列名和属性名做一个映射</li>
</ul>
<ol>
<li>ResultMap定义,其中id表示数据库中的主键，result表示数据库一般列名<pre><code> &lt;resultMap id=&quot;UserResult&quot; type=&quot;cn.pjl.mybatis.first.bena.User&quot;&gt;
    &lt;id column=&quot;ID_&quot; property=&quot;id&quot;&gt;&lt;/id&gt;
    &lt;result column=&quot;USERNAME_&quot; property=&quot;username&quot;&gt;&lt;/result&gt;
&lt;/resultMap&gt;
</code></pre></li>
<li>数据库语句的写法<pre><code>&lt;select id=&quot;findUserResultMap&quot; resultMap=&quot;UserResult&quot; parameterType=&quot;int&quot;&gt;
    select ID ID_,USERNAME USERNAME_ from user where ID = ${value}
&lt;/select&gt;
</code></pre></li>
</ol>
<h2 id="小结-ResultType必须属性名和查询列名一致，如果不一致可以使用ResultMap"><a href="#小结-ResultType必须属性名和查询列名一致，如果不一致可以使用ResultMap" class="headerlink" title="- 小结:ResultType必须属性名和查询列名一致，如果不一致可以使用ResultMap"></a>- 小结:ResultType必须属性名和查询列名一致，如果不一致可以使用ResultMap</h2><h3 id="动态SQL"><a href="#动态SQL" class="headerlink" title="动态SQL"></a>动态SQL</h3><h4 id="if判断条件sql"><a href="#if判断条件sql" class="headerlink" title="if判断条件sql"></a>if判断条件sql</h4><p>　　　　　　　　　　　　　　　<where><br>                <if text=""><br>                    //可以多个if嵌套<br>                </if><br>               </where></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mybatis/">Mybatis</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
    <article id="post-Mybatis1" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a  href="/2017/10/23/Mybatis1/" class="article-date">
      <time datetime="2017-10-23T13:50:11.000Z" itemprop="datePublished">2017-10-23</time>
</a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a  class="article-title" href="/2017/10/23/Mybatis1/">Mybatis1</a>
    </h1>
  


      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="原生态jdbc问题总结"><a href="#原生态jdbc问题总结" class="headerlink" title="原生态jdbc问题总结"></a>原生态jdbc问题总结</h3><h4 id="使用jdbc查询数据库"><a href="#使用jdbc查询数据库" class="headerlink" title="使用jdbc查询数据库"></a>使用jdbc查询数据库</h4><ul>
<li>使用jdbc查询数据库用户表的记录</li>
<li>使用单纯的jdbc数据库存在的问题</li>
</ul>
<ol>
<li>数据库的链接，使用时就创建，不使用就立即释放，对数据库频繁链接开启和关闭，造成数据资源浪费，影响数据库的性能。</li>
</ol>
<ul>
<li>解决方案：使用数据库的连接池管理数据库</li>
</ul>
<ol>
<li>将sql语句硬编码到java代码中，如果sql语句修改就需要重新编译java代码不利于代码的维护</li>
</ol>
<ul>
<li>解决方案：将sql语句配置到xm文件中</li>
</ul>
<ol>
<li>在向preparedStatement中设置参数对占位符的位置和设置参数值，硬编码在java代码中，不利于代码维护</li>
</ol>
<ul>
<li>解决方案：将sql语句以及占位符全部配置到xml文件中</li>
</ul>
<ol>
<li><p>从ResultSet中遍历数据时存在硬编码</p>
<h3 id="Mybatis的框架"><a href="#Mybatis的框架" class="headerlink" title="Mybatis的框架"></a>Mybatis的框架</h3><ul>
<li>是一个apache的持久化框架</li>
<li>让程序将主要精力放在sql上，通过mybatis的映射方式，自由灵活的生成(部分需要自己配置)满足需要的sql语句</li>
<li>mybatis可以将preparedStatement输入的参数，自动进行输入映射，将查询结果集灵活的映射处java对象<h3 id="Mybatis框架"><a href="#Mybatis框架" class="headerlink" title="Mybatis框架"></a>Mybatis框架</h3></li>
<li>sqlSessionFactoy:用于创建SqlSession</li>
<li>SqlSession:用于操作数据库的增删改查，是一个接口</li>
<li>Executor:执行器主要的实现类(基本执行器，缓存执行器)<h3 id="入门程序"><a href="#入门程序" class="headerlink" title="入门程序"></a>入门程序</h3></li>
</ul>
</li>
</ol>
<ul>
<li>log4j在开发时应该设置的级别是:DEBUG</li>
<li>生成环境设置为info或error<h4 id="Mybatis配置过程"><a href="#Mybatis配置过程" class="headerlink" title="Mybatis配置过程"></a>Mybatis配置过程</h4></li>
<li><p>配置SqlMapConfig.xml文件和mapper.xml文件</p>
<pre><code>  &lt;configuration&gt;
    &lt;!--
      &lt;settings&gt;
        &lt;setting name=&quot;useGeneratedKeys&quot; value=&quot;false&quot;/&gt;
        &lt;setting name=&quot;useColumnLabel&quot; value=&quot;true&quot;/&gt;
      &lt;/settings&gt;

      &lt;typeAliases&gt;
        &lt;typeAlias alias=&quot;UserAlias&quot; type=&quot;org.apache.ibatis.submitted.complex_property.User&quot;/&gt;
      &lt;/typeAliases&gt; --&gt;
    &lt;environments default=&quot;development&quot;&gt;
        &lt;environment id=&quot;development&quot;&gt;
            &lt;!--使用jdbc事务,由Mybatis进行事务控制--&gt;
            &lt;transactionManager type=&quot;JDBC&quot;&gt;
                &lt;property name=&quot;&quot; value=&quot;&quot;/&gt;
            &lt;/transactionManager&gt;
            &lt;!--数据库连接池,由mybatis控制--&gt;
            &lt;dataSource type=&quot;UNPOOLED&quot;&gt;
                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;
                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://127.0.0.1:3306/micro&quot;/&gt;
                &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;
                &lt;property name=&quot;password&quot; value=&quot;root123&quot;/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;

    &lt;mappers&gt;
        &lt;mapper resource=&quot;cn/pjlsb/config/sqlxml/Message.xml&quot;/&gt;
    &lt;/mappers&gt;

&lt;/configuration&gt;
</code></pre></li>
<li>创建映射文件,在映射文件中配置sql文件(uer.xml)<pre><code>  &lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;!--命名空间，用于对sql进行分类化管理--&gt;
&lt;mapper namespace=&quot;Message&quot;&gt;
  &lt;!--配置sql语句--&gt;
  &lt;!--select用于查询数据库,id用于标识映射文件的sql,statement的id
      --&gt;
  &lt;select id=&quot;&quot; parameterType=“” resultType=&quot;&quot;&gt;&lt;!--parameterType指定输入到#{}的类型 resultType指定输出结果的类型--&gt;
    select * from message where id=#{msg}
    &lt;!--#{}表示一个占位符,msg表示输入的参数，参数名就是msg--&gt;
    &lt;!--如果输入的是简单类型,#{}中的参数是可以任意的--&gt;
  &lt;/select&gt;
&lt;/mapper&gt;
</code></pre></li>
<li>加载映射文件<pre><code>&lt;mappers&gt;
    &lt;mapper resource=&quot;cn/pjlsb/config/sqlxml/Message.xml&quot;/&gt;
&lt;/mappers&gt;
</code></pre></li>
<li>创建会话工厂<pre><code>String resource = &quot;SqlMapConfig的文件位置&quot;
&lt;!--配置流文件--&gt;  
InputStream inputStream = Resources.getResourcesAsStream(resource);
&lt;!--获取Mybatis的配置文件信息--&gt;
SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);
</code></pre></li>
<li>通过SqlSessionFactory得到SqlSession<pre><code>SqlSession sqlSession = sqlSessionFactory.openSession();
</code></pre></li>
<li>通过SqlSession操作数据库<pre><code>sqlSession.selectOne(statement,parameter)
&lt;!--statement就是配置文件中数据库操作的namespace.id--&gt;
&lt;!--指定和映射文件所匹配的parameterType类型的参数--&gt;
</code></pre></li>
<li>映射成parameterType中所指定的对象<pre><code>Message message = sqlSession.select(statement,parameter);
</code></pre></li>
<li>释放资源<pre><code>sqlSession.close();
</code></pre>　### 查询信息</li>
<li>使用精准数据进行查询</li>
</ul>
<ol>
<li>SELECT * FROM user WHERE ID = #{id}</li>
</ol>
<ul>
<li>使用模糊匹配方式进行查询</li>
</ul>
<ol>
<li>select * from user where username=’%${value}%’<!--采用模糊匹配的写法--></li>
<li>${}:表示拼接sql串</li>
<li>存在的安全隐患:可能会引起sql注入</li>
<li>如果传入的是简单类型的，只能使用value，如：${value}<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3></li>
</ol>
<ul>
<li>parameterType:指定输入参数的类型</li>
<li>resultType:指定输出结果的类型</li>
<li>#{}:表示占位符</li>
<li>${}:拼接符，回引起sql注入</li>
<li>selectOne:查出一条记录进行映射</li>
<li><p>selectList:查询多个表结构进行映射</p>
<h3 id="添加信息"><a href="#添加信息" class="headerlink" title="添加信息"></a>添加信息</h3></li>
<li>语句：<pre><code>&lt;!--parameterType:指定了输入的类型--&gt;
&lt;!--values中的占位符根据输入参数的多少来确定，
#{}中的元素是通过类文件的属性名确定的--&gt;
&lt;insert id=&quot;&quot; parameterType=&quot;&quot;&gt;
 insert into user(ID,USERNAME,BIRTHDAY,SEX,ADDRESS) values(#{}...)
&lt;/insert&gt;
</code></pre></li>
<li><p>注意:需要sqlSession.commit:手动提交</p>
<h3 id="获取用户信息主键，主键的返回"><a href="#获取用户信息主键，主键的返回" class="headerlink" title="获取用户信息主键，主键的返回"></a>获取用户信息主键，主键的返回</h3><h4 id="自增主键的返回"><a href="#自增主键的返回" class="headerlink" title="自增主键的返回"></a>自增主键的返回</h4></li>
<li>mysql自增主键，执行insert提交之前自动生成一个自增主键。</li>
<li><p>LAST_INSERT_ID()函数返回结果</p>
<pre><code>&lt;selectKey keyProperty=&quot;将查询到的属性值设置到对应的对象的属性&quot; order=&quot;AFTER&quot; resultType=&quot;设置的返回结果集&quot;&gt;
    select LAST_INSERT_ID()
&lt;/selectKey&gt;
</code></pre><p>####　非自增主键的返回</p>
<ul>
<li>使用mysql的uuid()函数进行修改</li>
<li>使用这个函数需要将表中的id字段设置为String，长度是35个字节</li>
<li><p>先使用uuid进行主键的查询，在sql语句之前运行</p>
<pre><code>&lt;selectKey keyProperty=&quot;&quot; order=&quot;BEFORE&quot; resultType=&quot;java.lang.String&quot;&gt;
    SELECT uuid()
&lt;/selectKey&gt;
</code></pre><p>　### 删除用户：需要手动commit</p>
<pre><code>&lt;delete id=&quot;deleteUser&quot; parameterType=&quot;java.lang.String&quot;&gt;
    DELETE from user where ID=#{id}
&lt;/delete&gt;
</code></pre><h3 id="更新用户"><a href="#更新用户" class="headerlink" title="更新用户"></a>更新用户</h3><pre><code>&lt;update id=&quot;&quot; parameterType=&quot;一般都是个设置的对应的对象的属性&quot;&gt;
     update user set USERNAME=#{username},BIRTHDAY=#{birthday},SEX=#{sex},ADDRESS=#{address} where ID=#{id}
&lt;/update&gt;
</code></pre><h2 id="Mybatis开发dao的方法"><a href="#Mybatis开发dao的方法" class="headerlink" title="Mybatis开发dao的方法"></a>Mybatis开发dao的方法</h2></li>
</ul>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mybatis/">Mybatis</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
    <article id="post-Spring2" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a  href="/2017/10/18/Spring2/" class="article-date">
      <time datetime="2017-10-17T16:16:12.000Z" itemprop="datePublished">2017-10-18</time>
</a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a  class="article-title" href="/2017/10/18/Spring2/">Spring2</a>
    </h1>
  


      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="Spring的bean管理-注解"><a href="#Spring的bean管理-注解" class="headerlink" title="Spring的bean管理(注解)"></a>Spring的bean管理(注解)</h3><ul>
<li>使用注解创建对象</li>
<li>使用注解注入属性</li>
<li>xml和注解方式混合</li>
</ul>
<h3 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h3><ul>
<li>AOP概述</li>
<li>AOP底层原理</li>
<li>AOP操作相关术语</li>
</ul>
<h3 id="Spring的AOP操作-基于aspectj的xml方式"><a href="#Spring的AOP操作-基于aspectj的xml方式" class="headerlink" title="Spring的AOP操作(基于aspectj的xml方式)"></a>Spring的AOP操作(基于aspectj的xml方式)</h3><h3 id="log4j介绍"><a href="#log4j介绍" class="headerlink" title="log4j介绍"></a>log4j介绍</h3><h3 id="Spring整合web项目演示"><a href="#Spring整合web项目演示" class="headerlink" title="Spring整合web项目演示"></a>Spring整合web项目演示</h3><hr>
<h3 id="Spring的bean管理"><a href="#Spring的bean管理" class="headerlink" title="Spring的bean管理"></a>Spring的bean管理</h3><h4 id="注解介绍"><a href="#注解介绍" class="headerlink" title="注解介绍"></a>注解介绍</h4><ul>
<li>注解:代码中特殊的标记，可以使用注解完成相关的功能</li>
<li>注解的写法:@注解名称(=属性值)</li>
<li>使用的范围:类，方法，属性都可以使用注解<h4 id="Spring注解开发的准备"><a href="#Spring注解开发的准备" class="headerlink" title="Spring注解开发的准备"></a>Spring注解开发的准备</h4></li>
<li>导入jar包(Spring基础jar包和AOP的jar包)</li>
<li>创建类，创建方法</li>
<li>创建Spring的配置文件，引入约束</li>
</ul>
<ol>
<li>注解的开发需要引入新的约束<pre><code>xmlns:p=&quot;http://www.springframework.org/schema/beans/spring-context.xsd
</code></pre></li>
<li>在配置文件中配置一个配置即可:<pre><code>  &lt;!--到包中扫描类，方法，属性上面是否有注解--&gt;
&lt;context:component-scan base-package=&quot;创建对象的类的包的名字&quot;&gt;&lt;/context:component&gt;
  &lt;!--扫描属性上面的注解--&gt;
&lt;context:annotation-config&gt;&lt;/context:annotation-config&gt;
</code></pre><h4 id="使用注解方式创建对象"><a href="#使用注解方式创建对象" class="headerlink" title="使用注解方式创建对象"></a>使用注解方式创建对象</h4></li>
</ol>
<ul>
<li>在类上面写注解，调用javabean代码与配置文件方式一样</li>
<li>@Componet(value=”类似配置文件中的id属性”)<bean id="" class=""></bean></li>
<li>@Controller: WEB层</li>
<li>@Service: 业务层</li>
<li>@Repository: 持久层</li>
<li>目前这些注解的功能一样，用于创建对象</li>
<li>创建对象标明是单实例还是多实例:在类上面写@Scope(value=””)<h4 id="使用注解方式注入属性"><a href="#使用注解方式注入属性" class="headerlink" title="使用注解方式注入属性"></a>使用注解方式注入属性</h4></li>
<li>不需要写set方法,Spring自动生成</li>
<li>@AutoWired,在另一个类中声明对象时，不需要考虑名称是否一样,对属性进行自动注入</li>
<li>[@Component(value=”userDao”)和@Autowired　private UserDao userDaoo]一样可以成功加载</li>
<li>@Resource(name=”指定对象的value的值”)</li>
</ul>
<h3 id="配置文件和注解混合使用"><a href="#配置文件和注解混合使用" class="headerlink" title="配置文件和注解混合使用"></a>配置文件和注解混合使用</h3><h4 id="创建对象操作使用配置文件方式实现"><a href="#创建对象操作使用配置文件方式实现" class="headerlink" title="创建对象操作使用配置文件方式实现"></a>创建对象操作使用配置文件方式实现</h4><h4 id="注入属性的操作使用注解的方式实现"><a href="#注入属性的操作使用注解的方式实现" class="headerlink" title="注入属性的操作使用注解的方式实现"></a>注入属性的操作使用注解的方式实现</h4><h3 id="AOP-1"><a href="#AOP-1" class="headerlink" title="AOP"></a>AOP</h3><h4 id="AOP的概念"><a href="#AOP的概念" class="headerlink" title="AOP的概念"></a>AOP的概念</h4><ul>
<li>AOP:面向切面/方面编程，扩展功能不是通过修改源代码实现</li>
<li>采用横向抽取机制，取代了传统纵向继承体重复代码(性能监视，事物管理，安全检查，缓存)<blockquote>
<ul>
<li>纵向机制:通过继承类实现功能的扩展,父类名称如果发生变换，子类中调用的方法也需要修改</li>
<li>横向机制:使用动态代理方式实现</li>
<li>代理对象:是一个假的对象，但是可以实现对应的方法,(JDK的动态代理是针对有接口的情况);(cglib针对没有接口的情况)</li>
</ul>
</blockquote>
</li>
</ul>
<h4 id="AOP的操作术语"><a href="#AOP的操作术语" class="headerlink" title="AOP的操作术语"></a>AOP的操作术语</h4><ul>
<li>Joinponit(连接点):类中的那些方法可以被增强，这些方法就是连接点</li>
<li>(!)Ponitcut(切入点):只是增强其中的部分方法，那些实际被增强的方法就是切入点</li>
<li>(!)Advice(通知/增强):实际增强的逻辑就是增强，如一个方法需要扩展日志功能，这个日志功能就是增强</li>
<li>(!)Aspect(切面):把增强应用到具体的方法上面，这个过程就是切面，就是把增强应用到切入点的过程<blockquote>
<ul>
<li>前置通知:就是在方法之前执行</li>
<li>后置通知:在方法之后执行</li>
<li>异常通知:在方法中出现了异常</li>
<li>最终通知:在后置通知之后执行</li>
<li>环绕通知:方法之前和之后执行</li>
</ul>
</blockquote>
</li>
<li>Introduction(引介):使用动态方式添加属性和方法</li>
<li>Target(目标对象):增强方法所在的类就是目标对象</li>
<li>Weaving(织入):将advice用到target的过程</li>
<li>Proxy(代理):一个类被AOP织入增强后，就产生了一个结果代理类</li>
</ul>
<h4 id="使用AspectJ实现AOP"><a href="#使用AspectJ实现AOP" class="headerlink" title="使用AspectJ实现AOP"></a>使用AspectJ实现AOP</h4><h4 id="Spring的AOP操作"><a href="#Spring的AOP操作" class="headerlink" title="Spring的AOP操作"></a>Spring的AOP操作</h4><ul>
<li>aspectj不是Spring的一部分，单独存在的面向切面的框架，和Spring一起进行AOP操作</li>
<li>使用aspectj实现的两种方式</li>
</ul>
<ol>
<li>基于aspectj的xml文件</li>
<li>基于aspectj的注解方式实现<h4 id="AOP准备工作"><a href="#AOP准备工作" class="headerlink" title="AOP准备工作"></a>AOP准备工作</h4></li>
</ol>
<ul>
<li>导入jar包</li>
<li>创建核心配置文件，导入AOP的约束<h4 id="使用表达式配置切入点"><a href="#使用表达式配置切入点" class="headerlink" title="使用表达式配置切入点"></a>使用表达式配置切入点</h4><h5 id="常用表达式"><a href="#常用表达式" class="headerlink" title="常用表达式"></a>常用表达式</h5></li>
<li>execution(&lt;访问修饰符&gt;?&lt;返回类型&gt;&lt;方法名&gt;(参数)&lt;异常&gt;)</li>
</ul>
<ol>
<li>访问修饰符:public,private,protected；一般写*表示任意的修饰符</li>
<li>写增强方法的全路径</li>
</ol>
<h5 id="AOP配置：首先是创建对应类的对象，使用"><a href="#AOP配置：首先是创建对应类的对象，使用" class="headerlink" title="AOP配置：首先是创建对应类的对象，使用"></a>AOP配置：首先是创建对应类的对象，使用<bean></bean></h5><pre><code>&lt;aop:config&gt;
  &lt;!--配置切入点--&gt;
  &lt;aop:pointcut expression=&quot;需要增强方法的全路径&quot; id=&quot;就是一个识别&quot;&gt;&lt;/aop:pointcut&gt;
  &lt;!--配置切面--&gt;
  &lt;aop:aspect ref=&quot;增强类对象&quot;&gt;
    &lt;!--增强方式--&gt;
    &lt;aop:Before method=&quot;用来增强其他类的方法&quot; pointcut=“切入点的id属性” /&gt;
  &lt;/aop:aspect&gt;
&lt;/aop:config&gt;
</code></pre><h5 id="注意通知的不同处-需要传入ProceedingJoinPoint"><a href="#注意通知的不同处-需要传入ProceedingJoinPoint" class="headerlink" title="注意通知的不同处:需要传入ProceedingJoinPoint"></a>注意通知的不同处:需要传入ProceedingJoinPoint</h5><pre><code>public void circle(ProceedingJoinPoint proceedingJoinPoint) throws Throwable
{
      System.out.println(&quot;之前&quot;);
      proceedingJoinPoint.proceed();
      System.out.println(&quot;之后&quot;);
}
</code></pre><h4 id="log4j"><a href="#log4j" class="headerlink" title="log4j:"></a>log4j:</h4><ul>
<li>作用：能够查看更加详细的信息</li>
<li>使用：导入log4j.properties文件，可以设置日志级别</li>
</ul>
<ol>
<li>info:基本信息</li>
<li><p>debug:详细信息</p>
<h3 id="给予aspectj的注解aop"><a href="#给予aspectj的注解aop" class="headerlink" title="给予aspectj的注解aop"></a>给予aspectj的注解aop</h3><h4 id="使用注解方式实现aop"><a href="#使用注解方式实现aop" class="headerlink" title="使用注解方式实现aop"></a>使用注解方式实现aop</h4><ul>
<li>创建对象</li>
<li>在Spring核心配置文件中开启aop操作<pre><code>&lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;
</code></pre></li>
<li>在增强的类上使用注解实现</li>
</ul>
<ol>
<li>在类上面需要添加Aspect注解</li>
<li>在方法上面使用注解完成增强<blockquote>
<ul>
<li>在增强方法中类写@Aspect;在增强方法上写@Before(value=”execution(<em> cn.pjl.aop.Book.</em>(..))”)</li>
</ul>
</blockquote>
</li>
</ol>
</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/">Spring</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
    <article id="post-Spring1" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a  href="/2017/10/18/Spring1/" class="article-date">
      <time datetime="2017-10-17T16:13:11.000Z" itemprop="datePublished">2017-10-18</time>
</a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a  class="article-title" href="/2017/10/18/Spring1/">Spring1</a>
    </h1>
  


      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>是一个开源的轻量级的框架</li>
<li>Spring核心主要有两部分<ol>
<li>AOP:面向切面编程：扩展功能不是修改代码实现</li>
<li>IOC:创建对象不是通过new的方式实现，而是交给SPring进行创建(底层主要是通过:XML配置文件，工厂模式，dom4j来实现相关操作)</li>
</ol>
</li>
<li>是一站式框架：对于JavaEE三层结构中都提供了不同的解决技术(web层(SpringMVC),service层(IOC),dao层(jdbcTemplate))</li>
</ul>
<h2 id="IOC底层原理"><a href="#IOC底层原理" class="headerlink" title="IOC底层原理"></a>IOC底层原理</h2><ul>
<li>将对象的创建交给Spring进行管理</li>
<li>IOC操作的两个部分</li>
</ul>
<ol>
<li>IOC的配置文件方式</li>
<li>IOC的注解方式</li>
</ol>
<ul>
<li>底层技术(在Spring中2,3,4都已经在框架中，只需要配置xml文件即可)</li>
</ul>
<ol>
<li>xml配置文件</li>
<li>dom4j解析xml</li>
<li>工厂设计模式</li>
<li>反射机制</li>
</ol>
<ul>
<li>底层操作的步骤</li>
</ul>
<ol>
<li>创建xml配置文件，配置需要创建的类: &lt;bean id = “” class = “类的详细地址”&gt;&lt;/bean&gt;</li>
<li>创建工厂类:<pre><code>public class factory
{
  public static Service getService()
  {
    //1. 使用dom4j解析文件,根据id值
    Class clazz = Class.forName(&quot;class的属性值&quot;);
    //2. 创建类的对象
    Service service = clazz.newInstance();
    return service;
  }
}
</code></pre></li>
</ol>
<ul>
<li><p>优点:在修改代码的时候，只需要修改配置文件的参数，不需要大规模的修改源代码，能够降低类与类之间的耦合度</p>
<h2 id="Spring入门案例"><a href="#Spring入门案例" class="headerlink" title="Spring入门案例"></a>Spring入门案例</h2><ul>
<li>导入jar包：只需要导入四个核心jar包和日志输出的jar包</li>
<li>创建类,在类中创建方法</li>
</ul>
<ol>
<li>Spring核心配置文件的位置和名称不是固定的</li>
<li>建议放到src下，官方建议applicationContext.xml</li>
<li>引入schema约束</li>
<li>配置对象的创建</li>
</ol>
<ul>
<li>创建Spring配置文件,配置创建类</li>
<li>写代码测试对象创建<h2 id="配置文件没有提示解决方案"><a href="#配置文件没有提示解决方案" class="headerlink" title="配置文件没有提示解决方案"></a>配置文件没有提示解决方案</h2></li>
</ul>
<ol>
<li>Spring引入的是schema约束，将约束文件引入到eclispe中<h2 id="Spring的bean管理-xml方式"><a href="#Spring的bean管理-xml方式" class="headerlink" title="Spring的bean管理(xml方式)"></a>Spring的bean管理(xml方式)</h2><h3 id="Bean实例化方式"><a href="#Bean实例化方式" class="headerlink" title="Bean实例化方式"></a>Bean实例化方式</h3></li>
</ol>
<ul>
<li>在Spring里面通过配置文件创建对象</li>
<li>bean实例化三种方式</li>
</ul>
<ol>
<li>使用类中的无参构造函数(使用较多)，如果在类中没有无参的构造函数，程序就会报错。</li>
<li>使用静态工厂创建:在类中创建静态方法返回对象在配置文件写工厂的路径，并且写入静态工厂中的方法</li>
<li>使用实例工厂创建:创建不是静态的方法，返回类的对象</li>
</ol>
<h2 id="Bean标签属性介绍"><a href="#Bean标签属性介绍" class="headerlink" title="Bean标签属性介绍"></a>Bean标签属性介绍</h2><h3 id="id"><a href="#id" class="headerlink" title="id"></a>id</h3><ul>
<li>是一个名称，可以任意命名</li>
<li>id的属性值不能包含一些特殊符号，直接写单词。</li>
<li>根据id值得到配置对象</li>
</ul>
<h3 id="class"><a href="#class" class="headerlink" title="class"></a>class</h3><ul>
<li>创建类的全路径</li>
</ul>
<h3 id="name"><a href="#name" class="headerlink" title="name"></a>name</h3><ul>
<li>功能和id属性是一样的，但是有区别，name值中可以包含特殊符号,现在没怎么用了</li>
</ul>
<h3 id="scope"><a href="#scope" class="headerlink" title="scope"></a>scope</h3><ul>
<li>singleton:单例(重点),配置文件的默认值</li>
<li>prototype:多例(重点)</li>
<li>request：创建对象把对象放到request域对象中</li>
<li>session：创建对象把对象放入session域对象中</li>
<li>globalSession：表示创建对象放入gloableSession中<h2 id="属性的注入"><a href="#属性的注入" class="headerlink" title="属性的注入"></a>属性的注入</h2><h3 id="创建对象的时候，也要向类里面的属性里面设置值"><a href="#创建对象的时候，也要向类里面的属性里面设置值" class="headerlink" title="创建对象的时候，也要向类里面的属性里面设置值"></a>创建对象的时候，也要向类里面的属性里面设置值</h3><h3 id="属性注入的方式"><a href="#属性注入的方式" class="headerlink" title="属性注入的方式"></a>属性注入的方式</h3></li>
<li>使用set方法注入</li>
<li>有参数的构造函数进行注入</li>
<li>使用接口注入</li>
<li>在Spring中只是支持前两种注入(set方法注入和操作函数注入)<h3 id="使用有参数的构造注入"><a href="#使用有参数的构造注入" class="headerlink" title="使用有参数的构造注入"></a>使用有参数的构造注入</h3></li>
<li>对有参数的构造函数进行和无参数的构造函数相同的id class配置只是在&lt;bean&gt;&lt;/bean&gt;之间配置&lt;constructor-arg name=”参数名字” value = “参数的值”&gt;&lt;/constructor-arg&gt;<h3 id="使用set方式的注入"><a href="#使用set方式的注入" class="headerlink" title="使用set方式的注入"></a>使用set方式的注入</h3></li>
<li>通用写法在配置文件中创建对象</li>
<li>注入属性值&lt;property name = “属性名” value = “属性的值”&gt;&lt;/property&gt;<h3 id="注入对象类型的属性"><a href="#注入对象类型的属性" class="headerlink" title="注入对象类型的属性"></a>注入对象类型的属性</h3></li>
<li>实过程</li>
</ul>
<ol>
<li>在service中把dao作为类型属性</li>
<li>生成dao类型的set方法</li>
<li>在配置文件中完成注入：实现方式与set方式注入类用ref代替value;使用广泛<h3 id="名称空间的注入"><a href="#名称空间的注入" class="headerlink" title="名称空间的注入"></a>名称空间的注入</h3></li>
</ol>
<ul>
<li>用于表示多个操作</li>
<li>对配置文件的操作，</li>
<li>操作首先是在xml文件中添加<pre><code>xmlns:p=&quot;http://www.springframework.org/schema/p&quot;
配置&lt;bean id = &quot;&quot; class = &quot;&quot; p:属性名=“属性值”&gt;&lt;/bean&gt;
</code></pre><h3 id="注入复杂的数据"><a href="#注入复杂的数据" class="headerlink" title="注入复杂的数据"></a>注入复杂的数据</h3><h4 id="数组-数据有多少个就加多少个value"><a href="#数组-数据有多少个就加多少个value" class="headerlink" title="数组:数据有多少个就加多少个value"></a>数组:数据有多少个就加多少个value</h4><pre><code>&lt;property name=&quot;数组名字&quot;&gt;
  &lt;list&gt;
    &lt;value&gt;&lt;/value&gt;
    &lt;value&gt;&lt;/value&gt;
    &lt;value&gt;&lt;/value&gt;
    &lt;value&gt;&lt;/value&gt;
    &lt;value&gt;&lt;/value&gt;
  &lt;/list&gt;
&lt;/property&gt;
</code></pre><h4 id="list集合"><a href="#list集合" class="headerlink" title="list集合"></a>list集合</h4><pre><code>&lt;property name=&quot;list集合的写法&quot;&gt;
  &lt;list&gt;
    &lt;value&gt;&lt;/value&gt;
    &lt;value&gt;&lt;/value&gt;
    &lt;value&gt;&lt;/value&gt;
    &lt;value&gt;&lt;/value&gt;
    &lt;value&gt;&lt;/value&gt;
  &lt;/list&gt;
&lt;/property&gt;
</code></pre><h4 id="map集合"><a href="#map集合" class="headerlink" title="map集合"></a>map集合</h4><pre><code>&lt;property&gt;
  &lt;map&gt;
    &lt;entry key = &quot;&quot; value=&quot;&quot;&gt;&lt;/entry&gt;
    &lt;entry key = &quot;&quot; value=&quot;&quot;&gt;&lt;/entry&gt;
    &lt;entry key = &quot;&quot; value=&quot;&quot;&gt;&lt;/entry&gt;
  &lt;/map&gt;
&lt;/property&gt;
</code></pre><h4 id="property类型"><a href="#property类型" class="headerlink" title="property类型"></a>property类型</h4><pre><code>&lt;property&gt;
  &lt;props&gt;
    &lt;prop key = &quot;&quot;&gt;键对应的值&lt;/prop&gt;
    &lt;prop key = &quot;&quot;&gt;键对应的值&lt;/prop&gt;
    &lt;prop key = &quot;&quot;&gt;键对应的值&lt;/prop&gt;
    &lt;prop key = &quot;&quot;&gt;键对应的值&lt;/prop&gt;
  &lt;/props&gt;
&lt;/property&gt;
</code></pre></li>
</ul>
</li>
</ul>
<h3 id="IOC与DI区别"><a href="#IOC与DI区别" class="headerlink" title="IOC与DI区别"></a>IOC与DI区别</h3><ul>
<li>IOC:控制反转，创建对象</li>
<li>DI:依赖注入，向类中的属性设置值<h4 id="二者关系"><a href="#二者关系" class="headerlink" title="二者关系"></a>二者关系</h4></li>
<li>依赖注入不能单独存在，需要借助IOC完成操作<h3 id="Spring整合web项目"><a href="#Spring整合web项目" class="headerlink" title="Spring整合web项目"></a>Spring整合web项目</h3></li>
<li>加载spring配置文件，更具创建对象</li>
<li>new对象，功能可以实现但是效率很低<h4 id="把加载配置文件和创建对象过程，在服务器启动时候完成"><a href="#把加载配置文件和创建对象过程，在服务器启动时候完成" class="headerlink" title="把加载配置文件和创建对象过程，在服务器启动时候完成"></a>把加载配置文件和创建对象过程，在服务器启动时候完成</h4><h5 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h5></li>
<li>ServletContext对象</li>
<li>用到监听器</li>
<li>具体使用</li>
</ul>
<ol>
<li>在服务器启动时，为每个项目创建了一个ServletContext对象</li>
<li>在ServletContext对象创建时，使用监听器可以具体到ServletContext对象在什么时候创建</li>
<li>使用监听器监听到ServletContet对象创建的时候</li>
<li>加载Spring配置文件，把配置文件配置对象创建</li>
<li>把创建出来的对象放到ServletContext域对象中(setAttribute)</li>
<li>获取对象时，到ServletContext域得到(getAttribute)</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/">Spring</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
    <article id="post-诗3" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a  href="/2017/10/11/诗3/" class="article-date">
      <time datetime="2017-10-11T01:15:50.000Z" itemprop="datePublished">2017-10-11</time>
</a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a  class="article-title" href="/2017/10/11/诗3/">诗3</a>
    </h1>
  


      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>　<br>轻轻的我走了，<br>正如我轻轻的来；<br>我轻轻的招手，<br>作别西天的云彩。<br>　<br>那河畔的金柳，<br>是夕阳中的新娘；<br>波光里的艳影，<br>在我的心头荡漾。<br>　<br>软泥上的青荇，<br>油油的在水底招摇；<br>在康河的柔波里，<br>我甘心做一条水草！<br>　<br>那榆荫下的一潭，<br>不是清泉，<br>是天上虹；<br>揉碎在浮藻间，<br>沉淀着彩虹似的梦。<br>　<br>寻梦？撑一支长篙，<br>向青草更青处漫溯；<br>满载一船星辉，<br>在星辉斑斓里放歌。<br>　<br>但我不能放歌，<br>悄悄是别离的笙箫；<br>夏虫也为我沉默，<br>沉默是今晚的康桥！<br>　<br>悄悄的我走了，<br>正如我悄悄的来；<br>我挥一挥衣袖，<br>不带走一片云彩。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/再别康桥/">再别康桥</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
    <article id="post-条件转移指令" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a  href="/2017/07/14/条件转移指令/" class="article-date">
      <time datetime="2017-07-14T00:28:06.000Z" itemprop="datePublished">2017-07-14</time>
</a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a  class="article-title" href="/2017/07/14/条件转移指令/">转移指令</a>
    </h1>
  


      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="条件转移指令"><a href="#条件转移指令" class="headerlink" title="条件转移指令"></a>条件转移指令</h2><h3 id="简单的条件转移指令"><a href="#简单的条件转移指令" class="headerlink" title="简单的条件转移指令"></a>简单的条件转移指令</h3><h4 id="JZ-JE"><a href="#JZ-JE" class="headerlink" title="JZ/JE"></a>JZ/JE</h4><ol>
<li>结果相等或为0转移</li>
<li>ZF=1</li>
</ol>
<h4 id="JNE-JNZ"><a href="#JNE-JNZ" class="headerlink" title="JNE/JNZ"></a>JNE/JNZ</h4><ol>
<li>结果不相等或不为0转移</li>
<li>ZF=0</li>
</ol>
<h4 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h4><ol>
<li>结果为负转移</li>
<li>SF=1</li>
</ol>
<h4 id="JNS"><a href="#JNS" class="headerlink" title="JNS"></a>JNS</h4><ol>
<li>结果不为负转移</li>
<li>SF=0</li>
</ol>
<h4 id="JO"><a href="#JO" class="headerlink" title="JO"></a>JO</h4><ol>
<li>溢出就转移</li>
<li>OF=1</li>
</ol>
<h4 id="JNO"><a href="#JNO" class="headerlink" title="JNO"></a>JNO</h4><ol>
<li>无溢出就转移</li>
<li>OF=0</li>
</ol>
<h4 id="JC"><a href="#JC" class="headerlink" title="JC"></a>JC</h4><ol>
<li>有进位转移</li>
<li>CF=1</li>
</ol>
<h4 id="JNC"><a href="#JNC" class="headerlink" title="JNC"></a>JNC</h4><ol>
<li>无进位转移</li>
<li>CF=0</li>
</ol>
<h4 id="JP"><a href="#JP" class="headerlink" title="JP"></a>JP</h4><ol>
<li>偶数个1转移</li>
<li>PF=1</li>
</ol>
<h4 id="JNP"><a href="#JNP" class="headerlink" title="JNP"></a>JNP</h4><ol>
<li>奇数个1转移</li>
<li>PF=0</li>
</ol>
<h4 id="JCXZ"><a href="#JCXZ" class="headerlink" title="JCXZ"></a>JCXZ</h4><ol>
<li>CF=0转移</li>
<li>无</li>
</ol>
<h3 id="无符号条件转移指令"><a href="#无符号条件转移指令" class="headerlink" title="无符号条件转移指令"></a>无符号条件转移指令</h3><h4 id="JA-JNBE"><a href="#JA-JNBE" class="headerlink" title="JA/JNBE"></a>JA/JNBE</h4><ol>
<li>大于/不小于等于转移</li>
<li>CF=0且ZF=0</li>
</ol>
<h4 id="JAE-JNB"><a href="#JAE-JNB" class="headerlink" title="JAE/JNB"></a>JAE/JNB</h4><ol>
<li>大于等于/不低于转移</li>
<li>CF=0且ＺＦ＝１</li>
</ol>
<h4 id="JB-JNAE"><a href="#JB-JNAE" class="headerlink" title="JB/JNAE"></a>JB/JNAE</h4><ol>
<li>小于/不大于等于转移</li>
<li>CF=1且ZF=0</li>
</ol>
<h4 id="JBE-JNA"><a href="#JBE-JNA" class="headerlink" title="JBE/JNA"></a>JBE/JNA</h4><ol>
<li>小于等于/不大于转移</li>
<li>CF=1且ZF=1</li>
</ol>
<h3 id="有符号数转移指令"><a href="#有符号数转移指令" class="headerlink" title="有符号数转移指令"></a>有符号数转移指令</h3><h4 id="JG-JNLE"><a href="#JG-JNLE" class="headerlink" title="JG/JNLE"></a>JG/JNLE</h4><ol>
<li>大于/不小于</li>
<li>SF=OF且ZF=0</li>
</ol>
<h4 id="JGE-JNL"><a href="#JGE-JNL" class="headerlink" title="JGE/JNL"></a>JGE/JNL</h4><ol>
<li>大于等于/不小于</li>
<li>SF=OF且ZF=1</li>
</ol>
<h4 id="JL-JNGE"><a href="#JL-JNGE" class="headerlink" title="JL/JNGE"></a>JL/JNGE</h4><ol>
<li>小于/不大于等于</li>
<li>SF!=OF且ZF=0</li>
</ol>
<h4 id="JLE-JNG"><a href="#JLE-JNG" class="headerlink" title="JLE/JNG"></a>JLE/JNG</h4><ol>
<li>小于等于/不大于</li>
<li>SF!=OF且ZF=1</li>
</ol>
<h4 id="有条件转移和无条件转移的区别"><a href="#有条件转移和无条件转移的区别" class="headerlink" title="有条件转移和无条件转移的区别"></a>有条件转移和无条件转移的区别</h4><ol>
<li>无条件转移不需要任何判断</li>
<li>有条件转移只在-128~127之间</li>
<li>无条件转移设有限制</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/汇编/">汇编</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
    <article id="post-Spring3" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a  href="/2017/07/13/Spring3/" class="article-date">
      <time datetime="2017-07-13T03:14:30.000Z" itemprop="datePublished">2017-07-13</time>
</a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a  class="article-title" href="/2017/07/13/Spring3/">Spring3</a>
    </h1>
  


      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="Spring的jdbcTemplate操作-使用在dao层的技术"><a href="#Spring的jdbcTemplate操作-使用在dao层的技术" class="headerlink" title="Spring的jdbcTemplate操作,使用在dao层的技术"></a>Spring的jdbcTemplate操作,使用在dao层的技术</h2><h4 id="Spring是一站式框架"><a href="#Spring是一站式框架" class="headerlink" title="Spring是一站式框架"></a>Spring是一站式框架</h4><h4 id="Spring对不同的持久化层都有封装"><a href="#Spring对不同的持久化层都有封装" class="headerlink" title="Spring对不同的持久化层都有封装"></a>Spring对不同的持久化层都有封装</h4><h4 id="JDBC-使用jdbcTemplate进行封装"><a href="#JDBC-使用jdbcTemplate进行封装" class="headerlink" title="JDBC:使用jdbcTemplate进行封装"></a>JDBC:使用jdbcTemplate进行封装</h4><ul>
<li>需要注册mysql驱动<pre><code>DriverManagerDataSource dataSource = new DriverManagerDataSource();
dataSource.setDriverClassName(&quot;com.mysql.jdbc.Driver&quot;);
dataSource.setUrl(&quot;jdbc:mysql://127.0.0.1:3306/micro&quot;);
dataSource.setUsername(&quot;root&quot;);
dataSource.setPassword(&quot;root123&quot;);
</code></pre></li>
<li>创建模板信息<pre><code>JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);
</code></pre></li>
<li>实际操作数据</li>
</ul>
<ol>
<li>增加:使用uodate(增加sql语句,增加数据的参数的具体值)</li>
<li>修改:使用update(修改sql语句,修改数据的参数的具体值)</li>
<li>删除:使用update(删除sql语句,删除数据的参数的具体值)</li>
<li>查询:<blockquote>
<ul>
<li>查询返回一个值<pre><code>使用queryForObject(sql语句,返回类型)
</code></pre></li>
<li>查询返回一个对象<pre><code>需要实现RowMapper接口，复写mapRow(ResultSet resultSet, int i) throws SQLException方法
操作与jdbc链接数据库操作相同，进行取值等操作
</code></pre></li>
<li>查询返回list集合<pre><code>使用query(sql语句,实现的RowMapper接口的，复写了mapRow(ResultSet resultSet, int i) throws SQLException方法的类
操作与jdnc操作数据库形式相同
</code></pre><h4 id="Hibernate-使用HibernateTemplate进行封装"><a href="#Hibernate-使用HibernateTemplate进行封装" class="headerlink" title="Hibernate:使用HibernateTemplate进行封装"></a>Hibernate:使用HibernateTemplate进行封装</h4><h4 id="Mybatis-使用SqlMapClientTemplate进行封装"><a href="#Mybatis-使用SqlMapClientTemplate进行封装" class="headerlink" title="Mybatis:使用SqlMapClientTemplate进行封装"></a>Mybatis:使用SqlMapClientTemplate进行封装</h4></li>
</ul>
</blockquote>
</li>
</ol>
<h3 id="Spring操作连接池-c3p0"><a href="#Spring操作连接池-c3p0" class="headerlink" title="Spring操作连接池:c3p0"></a>Spring操作连接池:c3p0</h3><ul>
<li>使用代码操作连接池<pre><code>com.mchange.v2.c3p0.DriverManagerDataSource dataSource = new com.mchange.v2.c3p0.DriverManagerDataSource();
dataSource.setDriverClass(&quot;com.mysql.jdbc.Driver&quot;);
dataSource.setJdbcUrl(&quot;jdbc:mysql://127.0.0.1:3306/micro&quot;);
dataSource.setPassword(&quot;root123&quot;);
dataSource.setUser(&quot;root&quot;);
</code></pre></li>
<li>使用配置文件操作连接池：连接池的方法都是set方法，可以使用set方式注入，达到操作连接池的效果<h3 id="在DAO层使用模板"><a href="#在DAO层使用模板" class="headerlink" title="在DAO层使用模板"></a>在DAO层使用模板</h3></li>
<li>在dao注入JdbcTemplate</li>
<li><p>在jdbcTemplate中注入dataSource实现操作</p>
<pre><code>&lt;!--配置连接池--&gt;
&lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;
    &lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://127.0.0.1:3306/micro&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;user&quot; value=&quot;root&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;password&quot; value=&quot;root123&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;userService&quot; class=&quot;cn.pjl.c3p0.UserService&quot;&gt;
    &lt;property name=&quot;userDao&quot; ref=&quot;userDao&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;userDao&quot; class=&quot;cn.pjl.c3p0.UserDao&quot;&gt;
    &lt;property name=&quot;jdbcTemplate&quot; ref=&quot;jdbcTemplate&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;bean class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot; id=&quot;jdbcTemplate&quot;&gt;
    &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre></li>
</ul>
<h3 id="Spring事物"><a href="#Spring事物" class="headerlink" title="Spring事物"></a>Spring事物</h3><h4 id="什么是事物-对sql操作最基本的单元，是一组操作，有一个失败都失败"><a href="#什么是事物-对sql操作最基本的单元，是一组操作，有一个失败都失败" class="headerlink" title="什么是事物:对sql操作最基本的单元，是一组操作，有一个失败都失败"></a>什么是事物:对sql操作最基本的单元，是一组操作，有一个失败都失败</h4><h4 id="事物的特效"><a href="#事物的特效" class="headerlink" title="事物的特效"></a>事物的特效</h4><h4 id="不考虑隔离性会产生的问题"><a href="#不考虑隔离性会产生的问题" class="headerlink" title="不考虑隔离性会产生的问题"></a>不考虑隔离性会产生的问题</h4><h4 id="设置隔离级别可以解决"><a href="#设置隔离级别可以解决" class="headerlink" title="设置隔离级别可以解决"></a>设置隔离级别可以解决</h4><h3 id="Spring事务管理以及API"><a href="#Spring事务管理以及API" class="headerlink" title="Spring事务管理以及API"></a>Spring事务管理以及API</h3><h4 id="Spring事务管理的两种方式"><a href="#Spring事务管理的两种方式" class="headerlink" title="Spring事务管理的两种方式"></a>Spring事务管理的两种方式</h4><ul>
<li>编程式</li>
<li>声明式</li>
</ul>
<ol>
<li>基于配置文件</li>
<li>基于注解实现<h4 id="Spring进行事物管理的API"><a href="#Spring进行事物管理的API" class="headerlink" title="Spring进行事物管理的API"></a>Spring进行事物管理的API</h4><h4 id="PlatformTransactionManager-事务管理器"><a href="#PlatformTransactionManager-事务管理器" class="headerlink" title="PlatformTransactionManager:事务管理器"></a>PlatformTransactionManager:事务管理器</h4></li>
</ol>
<ul>
<li>Spring针对不同dao层的框架，都有不同的实现类</li>
</ul>
<ol>
<li>DataSourceTranscationManager:针对JDBC或Mybatis</li>
<li>HibernateTransactionManager:针对Hibernate<h4 id="TransactionDefinition-事务定义器"><a href="#TransactionDefinition-事务定义器" class="headerlink" title="TransactionDefinition:事务定义器"></a>TransactionDefinition:事务定义器</h4><h4 id="TransactionStatus-事务具体运行状态"><a href="#TransactionStatus-事务具体运行状态" class="headerlink" title="TransactionStatus:事务具体运行状态"></a>TransactionStatus:事务具体运行状态</h4></li>
</ol>
<ul>
<li>如果没有添加事务，在出现异常时，会产生错误<h3 id="事务管理配置文件方式实现步骤"><a href="#事务管理配置文件方式实现步骤" class="headerlink" title="事务管理配置文件方式实现步骤"></a>事务管理配置文件方式实现步骤</h3></li>
<li>首先引入约束(aop和tx)</li>
<li>配置事物管理器<pre><code>&lt;bean id=&quot;tractionManager&quot; class=&quot;DataSourceTranscationManager的全路径&quot;&gt;
  &lt;property name=&quot;dataSource&quot; ref=&quot;连接池的数据源&quot;&gt;
&lt;/bean&gt;
</code></pre></li>
<li>配置事务增强<pre><code>&lt;tx:advice id=&quot;&quot; transaction-manager=&quot;事务管理器的id&quot;&gt;
  &lt;!--做事务操作---&gt;
  &lt;tx:attributes&gt;
    &lt;!--设置进行事务操作的方法匹配--&gt;
    &lt;tx:method name=&quot;方法名&quot;&gt;
  &lt;/tx:attributes
&lt;/tx:advice&gt;
</code></pre></li>
<li>配置切面<pre><code>&lt;aop:config&gt;
  &lt;aop:pointcut express=&quot;execution=(* 类的路径.方法(..))&quot; id=&quot;切入点命名&quot;&gt;
  &lt;aop:advisor advice-ref=&quot;事务增强的id&quot; point-ref=切入点的id&quot;&quot;&gt;
&lt;/aop:config&gt;
</code></pre><h3 id="事务管理的注解方式实现步骤"><a href="#事务管理的注解方式实现步骤" class="headerlink" title="事务管理的注解方式实现步骤"></a>事务管理的注解方式实现步骤</h3></li>
<li>配置事务管理器<pre><code>&lt;bean id=&quot;tractionManager&quot; class=&quot;DataSourceTranscationManager的全路径&quot;&gt;
  &lt;property name=&quot;dataSource&quot; ref=&quot;连接池的数据源&quot;&gt;
&lt;/bean&gt;
</code></pre></li>
<li>配置事务注解扫描<pre><code>&lt;tx:annotation-driven transaction-manager=&quot;事务管理器的id值&quot;&gt;&lt;/tx:annotation-driven&gt;
</code></pre></li>
<li>在要使用事务方法所在类的上面添加注解<pre><code>@Transactional;在需要使用的方法的类上面添加注解
</code></pre></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/">Spring</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
    <article id="post-8086的指令系统2" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a  href="/2017/07/13/8086的指令系统2/" class="article-date">
      <time datetime="2017-07-13T03:14:30.000Z" itemprop="datePublished">2017-07-13</time>
</a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a  class="article-title" href="/2017/07/13/8086的指令系统2/">8086的指令系统2</a>
    </h1>
  


      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="算数运算指令"><a href="#算数运算指令" class="headerlink" title="算数运算指令"></a>算数运算指令</h2><h3 id="加法指令"><a href="#加法指令" class="headerlink" title="加法指令"></a>加法指令</h3><h4 id="ADD加法指令"><a href="#ADD加法指令" class="headerlink" title="ADD加法指令"></a>ADD加法指令</h4><ol>
<li>ADD DST,SRC  (DST)&lt;-(DST)+(SRC)</li>
</ol>
<h4 id="ADC带进位加法指令"><a href="#ADC带进位加法指令" class="headerlink" title="ADC带进位加法指令"></a>ADC带进位加法指令</h4><ol>
<li>ADC DST,SRC  (DST)&lt;-(DST)+(SRC)+CF</li>
</ol>
<h4 id="INC加1指令"><a href="#INC加1指令" class="headerlink" title="INC加1指令"></a>INC加1指令</h4><ol>
<li>INC OPR  (OPR)&lt;-(OPR)+1</li>
</ol>
<h3 id="减法指令"><a href="#减法指令" class="headerlink" title="减法指令"></a>减法指令</h3><h4 id="SUB减法指令"><a href="#SUB减法指令" class="headerlink" title="SUB减法指令"></a>SUB减法指令</h4><ol>
<li>SUB DST,SRC  (DST)&lt;-(DST)-(SRC)</li>
<li>CF的设置:若减数&gt;被减数 CF=1,否则CF=0;有借位CF=0,无借位CF=1</li>
<li>OF的设置:两个数符号相反,OF=1;结果的符号与减数相同,OF=0</li>
</ol>
<h4 id="SBB带划位减法"><a href="#SBB带划位减法" class="headerlink" title="SBB带划位减法"></a>SBB带划位减法</h4><ol>
<li>SBB DST,SRC  (DST)&lt;-(DST)-(SRC)-(CF)</li>
</ol>
<h4 id="DEC减一指令"><a href="#DEC减一指令" class="headerlink" title="DEC减一指令"></a>DEC减一指令</h4><ol>
<li>DEC OPR  (OPR)&lt;-(OPR)-1</li>
</ol>
<h4 id="NEG求补指令"><a href="#NEG求补指令" class="headerlink" title="NEG求补指令"></a>NEG求补指令</h4><ol>
<li>NEG OPR  (OPR)&lt;-(-(OPR))</li>
</ol>
<h4 id="CMP比较指令"><a href="#CMP比较指令" class="headerlink" title="CMP比较指令"></a>CMP比较指令</h4><ol>
<li>CMP OPR1,OPR2  (OPR1)-(OPR2),求得的结果并不保存</li>
</ol>
<h3 id="乘法指令"><a href="#乘法指令" class="headerlink" title="乘法指令"></a>乘法指令</h3><h4 id="MUL无符号数乘法-MUL-OPR"><a href="#MUL无符号数乘法-MUL-OPR" class="headerlink" title="MUL无符号数乘法: MUL OPR"></a>MUL无符号数乘法: MUL OPR</h4><ol>
<li>字节操作:(AX)&lt;-(AL)*(OPR)</li>
<li>字操作:(DX):(AX)&lt;-(AX)*(OPR)</li>
<li>CF和OF的设置:若乘积的高一半为0,即字节操作的(AH)或字操作(DX)为0,CF和OF均为0,否则CF,OF均为1</li>
</ol>
<h4 id="I-MUL-有符号数乘法-I-MUL-OPR"><a href="#I-MUL-有符号数乘法-I-MUL-OPR" class="headerlink" title="I MUL 有符号数乘法: I MUL OPR"></a>I MUL 有符号数乘法: I MUL OPR</h4><ol>
<li>字节操作:(AX)&lt;-(AL)*OPR</li>
<li>字操作:(DX):(AX)&lt;-(AX)*OPR</li>
<li>CF和OF的设置:若乘积的高一半是第一半的符号扩展那么CF和OF为0,否则CF和OF均为1</li>
</ol>
<h3 id="除法指令"><a href="#除法指令" class="headerlink" title="除法指令"></a>除法指令</h3><h4 id="DIV无符号数除法：DIV-OPR"><a href="#DIV无符号数除法：DIV-OPR" class="headerlink" title="DIV无符号数除法：DIV OPR"></a>DIV无符号数除法：DIV OPR</h4><ol>
<li>16位操作:(AX)/(OPR)-&gt; AL商;(AX)/(OPR)-&gt; AX为余</li>
<li>32位操作:(DX:AX)/(OPR)-&gt; AX为商;(DX:AX)/(OPR)-&gt; DX为余</li>
</ol>
<h4 id="I-DIV有符号数除法：I-DIV-OPR"><a href="#I-DIV有符号数除法：I-DIV-OPR" class="headerlink" title="I DIV有符号数除法：I DIV OPR"></a>I DIV有符号数除法：I DIV OPR</h4><ol>
<li>商和余都是有符号的</li>
<li>若被除数的高8位绝对值&gt;=除数的绝对值,商就会溢出</li>
</ol>
<h3 id="逻辑指令"><a href="#逻辑指令" class="headerlink" title="逻辑指令"></a>逻辑指令</h3><h4 id="逻辑运算指令"><a href="#逻辑运算指令" class="headerlink" title="逻辑运算指令"></a>逻辑运算指令</h4><h5 id="AND逻辑与指令"><a href="#AND逻辑与指令" class="headerlink" title="AND逻辑与指令"></a>AND逻辑与指令</h5><ol>
<li>ADD DST,SRC  DST&lt;-DST^SRC</li>
<li>可用于修改操作数或将某些位置0</li>
</ol>
<h5 id="OR逻辑或指令"><a href="#OR逻辑或指令" class="headerlink" title="OR逻辑或指令"></a>OR逻辑或指令</h5><ol>
<li>OR DST,SRC  DST&lt;-DSTvSRC</li>
<li>结果送进操作数,可将某些位置置1</li>
</ol>
<h5 id="XOR逻辑异或指令"><a href="#XOR逻辑异或指令" class="headerlink" title="XOR逻辑异或指令"></a>XOR逻辑异或指令</h5><ol>
<li>XOR DST,SRC 结果送回目的操作数</li>
<li>主要用于清零,或某些位取反操作</li>
</ol>
<h5 id="TEST测试指令"><a href="#TEST测试指令" class="headerlink" title="TEST测试指令"></a>TEST测试指令</h5><ol>
<li>TEST OPR1,OPR2</li>
<li>不会改变操作数的值要测试那些位就将OPR2中的位置置1,其它为0</li>
</ol>
<h4 id="移位指令"><a href="#移位指令" class="headerlink" title="移位指令"></a>移位指令</h4><h5 id="算数-逻辑左移指令"><a href="#算数-逻辑左移指令" class="headerlink" title="算数,逻辑左移指令"></a>算数,逻辑左移指令</h5><ol>
<li>SAL/SHL DST,COUNT</li>
<li>CF将会存入最后移入位的值，低位用0补足</li>
<li>可用于实现有符号数和无符号数的2的n次方的乘法</li>
</ol>
<h5 id="算数右移指令"><a href="#算数右移指令" class="headerlink" title="算数右移指令"></a>算数右移指令</h5><ol>
<li>SAR DST,COUNT</li>
<li>CF将存入最后移入的值</li>
<li>可用于实现有符号数的2的n次方的除法</li>
</ol>
<h5 id="逻辑右移指令"><a href="#逻辑右移指令" class="headerlink" title="逻辑右移指令"></a>逻辑右移指令</h5><ol>
<li>SHR DST,COUNT</li>
<li>CF将存入最后移入位的值</li>
<li>可用于实现无符号数的2的n次方的除法</li>
</ol>
<h5 id="循环左移"><a href="#循环左移" class="headerlink" title="循环左移"></a>循环左移</h5><ol>
<li>ROL DST,COUNT</li>
<li>CF为最后移入位的值</li>
</ol>
<h5 id="循环右移"><a href="#循环右移" class="headerlink" title="循环右移"></a>循环右移</h5><ol>
<li>RCL DST,COUNT</li>
<li>连同CF标志位一起移动</li>
</ol>
<h3 id="逻辑指令-1"><a href="#逻辑指令-1" class="headerlink" title="逻辑指令"></a>逻辑指令</h3><h4 id="设置方向标志指令"><a href="#设置方向标志指令" class="headerlink" title="设置方向标志指令"></a>设置方向标志指令</h4><ol>
<li>CLD使DF=0，使串处理指令自加</li>
<li>STD使DF=1，使串处理指令自减</li>
</ol>
<h4 id="串处理指令"><a href="#串处理指令" class="headerlink" title="串处理指令"></a>串处理指令</h4><h5 id="MOVSB-MOVSW-串传送"><a href="#MOVSB-MOVSW-串传送" class="headerlink" title="MOVSB/MOVSW 串传送"></a>MOVSB/MOVSW 串传送</h5><ol>
<li>(ES:DI)&lt;-(DS:SI)</li>
<li>(SI)&lt;-(SI)加/减2</li>
<li>(DI)&lt;-DI加或减(1或2)</li>
</ol>
<h5 id="STOSB-STOSW-存串"><a href="#STOSB-STOSW-存串" class="headerlink" title="STOSB/STOSW 存串"></a>STOSB/STOSW 存串</h5><ol>
<li>(ES:DI)&lt;-AL/AX</li>
<li>(DI)&lt;-DI加/减(1或2)</li>
</ol>
<h5 id="LODSB-LODSW取串"><a href="#LODSB-LODSW取串" class="headerlink" title="LODSB/LODSW取串"></a>LODSB/LODSW取串</h5><ol>
<li>AL/AX&lt;-(DS:SI)</li>
<li>(SI)&lt;-(SI)加/减(1或2)</li>
</ol>
<h5 id="CMPSB-CMPSW串比较"><a href="#CMPSB-CMPSW串比较" class="headerlink" title="CMPSB/CMPSW串比较"></a>CMPSB/CMPSW串比较</h5><ol>
<li>(DS:SI)&lt;-(ES:DI)</li>
<li>(SI)&lt;-(SI)加/减(1或2)</li>
<li>(DI)&lt;-(DI)加/减(1或2)</li>
</ol>
<h5 id="SCASB-SCASW串扫描"><a href="#SCASB-SCASW串扫描" class="headerlink" title="SCASB/SCASW串扫描"></a>SCASB/SCASW串扫描</h5><ol>
<li>(DI)&lt;-(DI)加/减(1或2)</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/汇编/">汇编</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
    <article id="post-8086的指令系统" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a  href="/2017/07/12/8086的指令系统/" class="article-date">
      <time datetime="2017-07-12T03:13:32.000Z" itemprop="datePublished">2017-07-12</time>
</a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a  class="article-title" href="/2017/07/12/8086的指令系统/">8086的指令系统</a>
    </h1>
  


      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="数据传送指令"><a href="#数据传送指令" class="headerlink" title="数据传送指令"></a>数据传送指令</h2><h3 id="通用数据传送指令"><a href="#通用数据传送指令" class="headerlink" title="通用数据传送指令"></a>通用数据传送指令</h3><h4 id="MOV传送指令"><a href="#MOV传送指令" class="headerlink" title="MOV传送指令"></a>MOV传送指令</h4><h5 id="立即数传送"><a href="#立即数传送" class="headerlink" title="立即数传送"></a>立即数传送</h5><pre><code>1. MOV CX,40 立即数--&gt;寄存器
2. MOV BYTELD,40 立即数--&gt;存储单元
3. 注意立即数不能直接送到段寄存器,可用通用寄存器过渡: MOV AX,100   MOV DS,AX
</code></pre><h5 id="寄存器传送"><a href="#寄存器传送" class="headerlink" title="寄存器传送"></a>寄存器传送</h5><pre><code>1. MOV CX,AX 寄存器--&gt;寄存器
2. MOV BYTELD,AL 寄存器--&gt;存储单元
3. MOV DS,AX 寄存器--&gt;段寄存器(CS除外)
</code></pre><h5 id="存储单元传送"><a href="#存储单元传送" class="headerlink" title="存储单元传送"></a>存储单元传送</h5><pre><code>1. MOV CL,BYTELD 存储单元--&gt;寄存器
2. 理论上不允许两个存储单元之间传送，传送速度很慢
</code></pre><h5 id="段寄存器传送"><a href="#段寄存器传送" class="headerlink" title="段寄存器传送"></a>段寄存器传送</h5><pre><code>1. MOV AX,DS 段寄存器--&gt;寄存器
2. 不允许两个段寄存器直接传送，可以用寄存器过渡
</code></pre><h4 id="堆栈指令"><a href="#堆栈指令" class="headerlink" title="堆栈指令"></a>堆栈指令</h4><h5 id="PUSH压栈指令-PUSH-操作数-OPS"><a href="#PUSH压栈指令-PUSH-操作数-OPS" class="headerlink" title="PUSH压栈指令: PUSH 操作数(OPS)"></a>PUSH压栈指令: PUSH 操作数(OPS)</h5><pre><code>1. 操作:((SP)-1)--&gt;(SP);(OPS)H--&gt;((SP))&amp;&amp;((SP)-1)--&gt;(SP);(OPS)L--&gt;((SP))
2. 说明:现将SP减2再进行压栈操作
</code></pre><h5 id="POP弹栈指令-POP-操作数-OPS"><a href="#POP弹栈指令-POP-操作数-OPS" class="headerlink" title="POP弹栈指令: POP 操作数(OPS)"></a>POP弹栈指令: POP 操作数(OPS)</h5><pre><code>1. 将元素送到某通用寄存器，段寄存(CS除外)，子存储器
2. ((SP))--&gt;(OPS)L;((SP)+1)--&gt;(SP)&amp;&amp; ((SP)--&gt;(OPS)H);((SP)+1--&gt;(SP))
3. 先将元素送出再将SP+2
</code></pre><h5 id="堆栈指令的注意事项"><a href="#堆栈指令的注意事项" class="headerlink" title="堆栈指令的注意事项"></a>堆栈指令的注意事项</h5><pre><code>1. PUSH和POP只能是字操作存取字数据SP应加/减2
2. PUSH和POP不能使用立即数方式
3. POP指令的DST不允许是CS寄存器
4. PUSH和POP不影响标志位
5. PUSH用于暂存数据，POP用于恢复数据
</code></pre><h4 id="XCHG交换指令：XCHG-OPR1-OPR2"><a href="#XCHG交换指令：XCHG-OPR1-OPR2" class="headerlink" title="XCHG交换指令：XCHG OPR1,OPR2"></a>XCHG交换指令：XCHG OPR1,OPR2</h4><ol>
<li>直接将OPR1和OPR2的值互换，不需要中间变量的存在</li>
<li>两个操作数必须有一个在寄存器,可实现寄存器之间或寄存器与存储器之间的交换内容但不允许用段寄存器</li>
<li>指令可用除立即数外的任何寻址方式</li>
</ol>
<h3 id="累加器专用传送指令"><a href="#累加器专用传送指令" class="headerlink" title="累加器专用传送指令"></a>累加器专用传送指令</h3><h4 id="输入指令IN，将信息送入寄存器中"><a href="#输入指令IN，将信息送入寄存器中" class="headerlink" title="输入指令IN，将信息送入寄存器中"></a>输入指令IN，将信息送入寄存器中</h4><pre><code>1. IN AL,PORT  (PORT)-&gt;(AL)
2. IN AX,PORT  (PORT)-&gt;(AX)
3. IN AL,DX    (DX)-&gt;(AL)
4. IN AX,DX    (DX)-&gt;(AX)
5. 如端口值0~255之间，可以直接写入，否则要先送入DX寄存器中
</code></pre><h4 id="输出指令OUT-将寄存器的内容送到外部端口中"><a href="#输出指令OUT-将寄存器的内容送到外部端口中" class="headerlink" title="输出指令OUT,将寄存器的内容送到外部端口中"></a>输出指令OUT,将寄存器的内容送到外部端口中</h4><pre><code>1. OUT PORT,AL (AL)-&gt;(PORT)
2. OUT PORT,AX (AX)-&gt;(PORT)
3. OUT DX,AL   (AL)-&gt;(DX)
4. OUT DX,AX   (AX)-&gt;(DX)
</code></pre><h4 id="XLAT换码指令"><a href="#XLAT换码指令" class="headerlink" title="XLAT换码指令"></a>XLAT换码指令</h4><pre><code>1. XLAT OPR:(AL)&lt;-((DS)*16+(BX)+(AL))
</code></pre><h3 id="地址传送指令"><a href="#地址传送指令" class="headerlink" title="地址传送指令"></a>地址传送指令</h3><h4 id="LEA有效地址传送寄存器指令-LEA-REG-SRC"><a href="#LEA有效地址传送寄存器指令-LEA-REG-SRC" class="headerlink" title="LEA有效地址传送寄存器指令:LEA REG,SRC"></a>LEA有效地址传送寄存器指令:LEA REG,SRC</h4><pre><code>1. 将源操作数的有效地址送到指令的寄存器，该寄存器不能是段寄存器，源操作数可以使用除立即数好寄存器外的任何一种存储器寻址方式
2. LEA BX,LIST与MOV BX,OFFSET LIST作用一样
</code></pre><h4 id="装入地址指令"><a href="#装入地址指令" class="headerlink" title="装入地址指令"></a>装入地址指令</h4><pre><code>1. LDS REG,SRC
2. LES REG,SRC
3. 源操作数只能是存储器的操作数
4. 将(SRC)存入寄存器，把(SRC+2)存入指定段寄存器:LDS SI,[10H]
5. 列1:
    - 执行前:(DS)=C000H,(C000H)=0180H,(C0012H)=2000H;
    - 执行后:(SI)=0180H,(DS)=2000H;LEA DI,[BX]
6. 列2:
    - 执行前:(DS)=B000H,(BX)=080AH,(B080AH)=05AEH
    - 执行后:DI=05AEH,ES:4000H
</code></pre><h3 id="类型转化指令"><a href="#类型转化指令" class="headerlink" title="类型转化指令"></a>类型转化指令</h3><h4 id="CDW-字节-gt-字"><a href="#CDW-字节-gt-字" class="headerlink" title="CDW:字节-&gt;字"></a>CDW:字节-&gt;字</h4><pre><code>1. AL的内容将扩展到AH中
2. (AL)内容最高为1,(AH)为FF;(AL)最高有效0,(AH)为0
</code></pre><h4 id="CWD-字-gt-双字"><a href="#CWD-字-gt-双字" class="headerlink" title="CWD:字-&gt;双字"></a>CWD:字-&gt;双字</h4><pre><code>1. AX的内容扩展到DX中
2. (AX)最高有效位0，(DX)=0;(AX)最高有效位1 (DX)FFFF
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/汇编/">汇编</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
    <article id="post-汇编基础3" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a  href="/2017/07/11/汇编基础3/" class="article-date">
      <time datetime="2017-07-11T05:56:52.000Z" itemprop="datePublished">2017-07-11</time>
</a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a  class="article-title" href="/2017/07/11/汇编基础3/">8086指令系统和寻址方式</a>
    </h1>
  


      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="与转移有关的寻址方式"><a href="#与转移有关的寻址方式" class="headerlink" title="与转移有关的寻址方式"></a>与转移有关的寻址方式</h2><h3 id="三个表示转移距离"><a href="#三个表示转移距离" class="headerlink" title="三个表示转移距离"></a>三个表示转移距离</h3><ol>
<li>SHORT:-128~127</li>
<li>NEAR:-32768~32767，IP修改</li>
<li>FAR:转移超过正/负32k的字节，CS,IP都修改</li>
<li>CS:IP指向下一条将执行的指令首地址，当转移时修改;</li>
</ol>
<h3 id="寻址方式"><a href="#寻址方式" class="headerlink" title="寻址方式"></a>寻址方式</h3><ol>
<li>段内直接寻址<ol>
<li>JMP NEAR PTR AGAIN</li>
<li>JMP SHORT NEXT</li>
<li>适用于条件转移及无条件转移[条件转移，位移量为8]</li>
</ol>
</li>
<li>段内间接寻址<ol>
<li>JMP BX =&gt; IP=(BX)</li>
<li>JMP NEAR PTR[BX] IP=(DS*16+BX)</li>
<li>JMP SHORT [BX]</li>
</ol>
</li>
<li>段内直接寻址<ol>
<li>JMP FAR PTR OUTSEG</li>
</ol>
</li>
<li>段间间接寻址<ol>
<li>为了说明寻址两个单元，指令中需要加入DWORD</li>
<li>JMP DWORD PTR [SI]</li>
<li>JMP DWORD PTR [TABLE+BX]</li>
</ol>
</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/汇编/">汇编</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  

</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2017 Petter
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a><a href="https://github.com/maochunguang" target="_blank">Blog</a> by tommy
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >极客到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 4;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'xxxxx', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "//hm.baidu.com/hm.js?xxxxxx";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(
            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
</body>
</html>